<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAG Application Architecture</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        .description {
            background: #e8f5e8;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border-left: 4px solid #27ae60;
        }
        .description h3 {
            margin-top: 0;
            color: #1b5e20;
        }
        .description ul {
            margin: 10px 0;
        }
        .description li {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üèóÔ∏è RAG Application Architecture</h1>
        
        <div class="description">
            <h3>Architecture Flow:</h3>
            <ul>
                <li><strong>User Interface:</strong> React frontend with admin panel for document management</li>
                <li><strong>API Gateway:</strong> Django REST API handles all HTTP requests</li>
                <li><strong>Application Logic:</strong> Views orchestrate RAG and LLM services</li>
                <li><strong>Async Processing:</strong> Celery processes documents in background</li>
                <li><strong>Data Storage:</strong> SQLite for metadata, ChromaDB for vectors, file system for PDFs</li>
                <li><strong>External Services:</strong> GitHub AI for LLM, Sentence Transformers for embeddings</li>
            </ul>
        </div>

        <div class="mermaid">
graph TB
    %% User Interface Layer
    subgraph "üñ•Ô∏è Frontend Layer"
        UI[React UI<br/>Port 3000]
        Admin[Admin Interface<br/>Document Upload]
    end
    
    %% API Gateway
    subgraph "üåê API Layer"
        API[Django REST API<br/>Port 8000]
    end
    
    %% Core Application Logic
    subgraph "üß† Application Layer"
        Views[Django Views<br/>Request Handling]
        RAG[RAG Service<br/>LangChain Integration]
        LLM[LLM Service<br/>GitHub AI]
    end
    
    %% Data Processing
    subgraph "‚öôÔ∏è Processing Layer"
        Celery[Celery Worker<br/>Async Tasks]
        Redis[Redis<br/>Task Queue]
    end
    
    %% Data Storage
    subgraph "üíæ Data Layer"
        SQLite[(SQLite<br/>Conversations & Metadata)]
        ChromaDB[(ChromaDB<br/>Vector Database)]
        Files[File Storage<br/>PDF Documents]
    end
    
    %% External Services
    subgraph "‚òÅÔ∏è External Services"
        GitHub[GitHub AI<br/>LLM Provider]
        Embeddings[Sentence Transformers<br/>Embedding Model]
    end
    
    %% User Interactions
    UI --> API
    Admin --> API
    
    %% API to Application
    API --> Views
    Views --> RAG
    Views --> LLM
    
    %% RAG Processing Flow
    RAG --> ChromaDB
    RAG --> Embeddings
    RAG --> LLM
    
    %% Async Processing
    Views --> Celery
    Celery --> Redis
    Celery --> Files
    Celery --> ChromaDB
    
    %% Data Persistence
    Views --> SQLite
    RAG --> SQLite
    
    %% External API Calls
    LLM --> GitHub
    
    %% Styling
    classDef frontend fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef api fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef app fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef process fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef data fill:#fce4ec,stroke:#880e4f,stroke-width:2px
    classDef external fill:#f1f8e9,stroke:#33691e,stroke-width:2px
    
    class UI,Admin frontend
    class API api
    class Views,RAG,LLM app
    class Celery,Redis process
    class SQLite,ChromaDB,Files data
    class GitHub,Embeddings external
        </div>
    </div>

    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true
            }
        });
    </script>
</body>
</html>

